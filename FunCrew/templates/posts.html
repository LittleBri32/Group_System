<!DOCTYPE html>
<html>

<head>
    <title>è²¼æ–‡é›†åˆå€</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f2f2f2;
        }

        .post-header {
            display: flex;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .button {
            margin-right: 16px;
            border: none;
        }

        /*è²¼æ–‡æ¨£å¼*/
        .post {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
        }

        .post .info {
            font-size: 12px;
            color: #888;
        }

        .post .content {
            margin-top: 0px;
        }

        /*æ“ºæ”¾å¤§é ­è²¼æ·»åŠ çš„*/
        .user-info {
            display: flex;
            align-items: center;
        }

        .user-info h4 {
            margin-right: 8px;
        }

        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        /*æ“ºæ”¾å¤§é ­è²¼æ·»åŠ çš„*/
    </style>
</head>


<body>
    <div class="header">
        <div class="header-left">
            <button class="button"><a href="/home"> ğŸ¥‚ </a></button>
            <button class="button"><a href="/activity/activities/signingUp">æ´»å‹•</a></button>
            <button class="button"><a href="/post/posts/newest">è²¼æ–‡</a></button>
        </div>
        <div class="header-right">
            <button class="button"><a href="/user/logout">ç™»å‡º</a></button>
            <div class="user-info">
                <h4><a href="/user/personalInfo">{{ nickname }}</a></h4>
                <img src="../../{{ avatar }}" alt="å¤§é ­è²¼">
            </div>
        </div>
    </div>
    <br>
    <div class="header">
        <div class="header-left">
            <form method="POST">
                <button class="submit" name="newest"><a href="/post/posts/newest">æœ€æ–°</a></button>
                <button class="submit" name="mostView"><a href="/post/posts/mostView">æœ€å¤šè§€çœ‹</a></button>
                <button class="submit" name="hotest"><a href="/post/posts/hotest">è¨è«–ç†±çƒˆ</a></button>
            </form>
        </div>
        <div class="header-right">
            <form action="/post/posts/searching" method="POST">
                <input type="text" name="searching_value" placeholder="è¼¸å…¥æ¨™é¡Œæˆ–ä½¿ç”¨è€…åç¨±" required>
                <input type="submit" name="post_search_button" value="æœå°‹">
            </form>
            <button class="button"><a href="/post/create_post"
                    style="text-decoration:none; color:black">ç™¼å¸ƒè²¼æ–‡</a></button>
            <button class="button"><a href="/post/posts/my_posts"
                    style="text-decoration:none; color:black">æˆ‘çš„è²¼æ–‡</a></button>
            <button class="button"><a href="/post/my_comments"
                    style="text-decoration:none; color:black">æˆ‘çš„ç•™è¨€</a></button>
        </div>
    </div>
    <br>

    {% if sortmethod == "newest" %}
    <h1>æœ€æ–°</h1>
    {% elif sortmethod == "mostView" %}
    <h1>æœ€å¤šè§€çœ‹</h1>
    {% elif sortmethod == "hotest" %}
    <h1>è¨è«–ç†±çƒˆ</h1>
    {% elif sortmethod == "my_posts" %}
    <h1>æˆ‘çš„è²¼æ–‡</h1>
    {% elif sortmethod == "searching" %}
    <h1>æœå°‹ï¼š{{searching_value}}</h1>
    {% endif %}

    {% if not posts and sortmethod == "my_posts" %}
    <p>æˆ‘æƒ³éœéœ</p>
    <button><a href="/post/create_post">éœéœæ˜¯èª°</a></button>
    {% elif not posts %}
    <p>é€™è£¡å°±åƒæœŸæœ«è€ƒè©¦å·ï¼Œç”šéº¼ä¹Ÿæ²’æœ‰......</p>
    <button><a href="/post/create_post">æ­è¶´æŒ‰é€™è£¡</a></button>
    {% endif %}

    {% if searching_value %}
    {% for post in posts %}
    <div class="post">
        <div class="content">
            <a href="/post/posts/{{post['postID']}}?sortmethod={{sortmethod}}&searching_value={{searching_value}}"
                style="text-decoration:none; color:black">
                <p style="font-size:24px;">{{ post['postTitle'] }}</p>
                <p>{{ post['postContent'] }}</p>
            </a>
        </div>
        <div class="info">
            <span>{{ post['postTime'] }}</span>
            <span>By: <a href="/user/info/{{post['postUserID']}}">{{ post['nickname'] }}</a></span>
            <br><span>è§€çœ‹æ¬¡æ•¸ï¼š{{ post['postView'] }}</span>
        </div>

    </div>
    {% endfor %}
    {% else %}
    {% for post in posts %}
    <div class="post">
        <div class="content">
            <a href="/post/posts/{{post['postID']}}?sortmethod={{sortmethod}}"
                style="text-decoration:none; color:black">
                <p style="font-size:24px;">{{ post['postTitle'] }}</p>
                <p>{{ post['postContent'] }}</p>
            </a>
        </div>
        <div class="info">
            <span>{{ post['postTime'] }}</span>
            <span>By: <a href="/user/info/{{post['postUserID']}}">{{ post['nickname'] }}</a></span>
            <br><span>è§€çœ‹æ¬¡æ•¸ï¼š{{ post['postView'] }}</span>
        </div>
        <br>
        {% if (post['postUserID'] == userID) and (sortmethod != "searching") %}
        <div>
            <button><a href="/post/posts/update_post/{{post['postID']}}?sortmethod={{sortmethod}}"
                    style="text-decoration:none; color:black">ä¿®æ”¹å¸–æ–‡</a></button>
            <button><a href="/post/posts/delete_post/{{post['postID']}}?sortmethod={{sortmethod}}"
                    style="text-decoration:none; color:black">åˆªé™¤å¸–æ–‡</a></button>
        </div>
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}

</body>

</html>